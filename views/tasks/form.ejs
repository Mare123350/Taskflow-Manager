<%- include('../partials/header') %>

<div class="container">
  <h1 class="mb-4"><%= title %></h1>

  <form action="<%= formAction %>" method="POST" class="card p-4 shadow-sm">
    <!-- Title -->
    <div class="mb-3">
      <label for="title" class="form-label">Title</label>
      <input
        type="text"
        id="title"
        name="title"
        class="form-control"
        required
        maxlength="100"
        value="<%= task.title || '' %>"
      >
    </div>

    <!-- Description -->
    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea
        id="description"
        name="description"
        class="form-control"
        rows="3"
        maxlength="500"
      ><%= task.description || '' %></textarea>
    </div>

    <!-- Priority -->
    <div class="mb-3">
      <label for="priority" class="form-label">Priority</label>
      <select id="priority" name="priority" class="form-select" required>
        <option value="Low" <%= task.priority === 'Low' ? 'selected' : '' %>>Low</option>
        <option value="Medium" <%= (!task.priority || task.priority === 'Medium') ? 'selected' : '' %>>Medium</option>
        <option value="High" <%= task.priority === 'High' ? 'selected' : '' %>>High</option>
      </select>
    </div>

    <!-- Category -->
    <div class="mb-3">
      <label for="category" class="form-label">Category</label>
      <select id="category" name="category" class="form-select" required>
        <option value="Work" <%= task.category === 'Work' ? 'selected' : '' %>>Work</option>
        <option value="Personal" <%= task.category === 'Personal' ? 'selected' : '' %>>Personal</option>
        <option value="School" <%= task.category === 'School' ? 'selected' : '' %>>School</option>
        <option value="Other" <%= (!task.category || task.category === 'Other') ? 'selected' : '' %>>Other</option>
      </select>
    </div>

    <!-- Due Date -->
    <div class="mb-3">
      <label for="dueDate" class="form-label">Due Date</label>
      <input
        type="date"
        id="dueDate"
        name="dueDate"
        class="form-control"
        value="<%= task.dueDate ? task.dueDate.toISOString().substring(0,10) : '' %>"
      >
    </div>

    <!-- Completed -->
    <div class="form-check mb-3">
      <input
        class="form-check-input"
        type="checkbox"
        value="on"
        id="completed"
        name="completed"
        <%= task.completed ? 'checked' : '' %>
      >
      <label class="form-check-label" for="completed">
        Mark as completed
      </label>
    </div>

    <div class="d-flex justify-content-end gap-2 mt-4">
  <button type="submit" class="btn btn-primary btn-modern">
    <%= submitLabel %>
  </button>

  <a href="/tasks" class="btn btn-secondary btn-modern-light">
    Cancel
  </a>
</div>

  </form>
</div>

<%- include('../partials/footer') %>
